<div
    *ngIf="group"
    [class]="'dynamic-field' + (klass ? ' ' + klass : '') + (' ' + field?.type)"
    widget
    [style.display]="field.hide ? 'none' : ''"
    [formGroup]="group"
>
    <div class="details">
        <div class="icon" *ngIf="field.icon">
            <i *ngIf="!field.icon.type || field.icon.type === 'icon'" [class]="field.icon.class">{{
                field.icon.value
            }}</i>
            <img *ngIf="field.icon.type === 'image' || field.icon.type === 'img'" [src]="field.icon.src" />
        </div>
        <label *ngIf="field.label" [for]="field.key">{{ field.label }}</label>
    </div>
    <div class="control">
        <ng-container *ngIf="!field.readonly; else readonly">
            <ng-container [ngSwitch]="field.type">
                <!-- TEXTAREA FORM FIELD -->
                <textarea
                    *ngSwitchCase="'textarea'"
                    cdkTextareaAutosize
                    #autosize="cdkTextareaAutosize"
                    cdkAutosizeMinRows="4"
                    cdkAutosizeMaxRows="8"
                    [formControlName]="field.key"
                    [id]="field.key"
                    [placeholder]="field.attributes?.placeholder || field.attributes?.label || field.label"
                ></textarea>
                <!-- SELECT/ACTION FORM FIELD -->
                <div *ngSwitchCase="'action'" class="underline" (tapped)="field.performAction()">
                    {{ field.formatted }}
                </div>
                <!-- SELECT/ACTION FORM FIELD -->
                <!-- <checkbox
                    *ngSwitchCase="'checkbox'"
                    [label]="field.attributes?.placeholder || field.attributes?.label || field.label"
                ></checkbox> -->
                <!-- CUSTOM FORM FIELD -->
                <ng-container *ngSwitchCase="'custom'">
                    <!-- <a-custom-form-field></a-custom-form-field> -->
                </ng-container>
                <!-- DEFAULT TO A TEXT INPUT FIELD -->
                <input
                    *ngSwitchCase="'input'"
                    [id]="field.key"
                    [formControlName]="field.key"
                    [type]="field.attributes?.type"
                    [placeholder]="field.attributes?.placeholder || field.label"
                />
                <div *ngSwitchDefault>{{ field.formatted }}</div>
            </ng-container>
        </ng-container>
        <ng-template #readonly>
            <div>{{ field.formatted }}</div>
        </ng-template>
    </div>
</div>
